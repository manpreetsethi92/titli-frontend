{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDqV46aMnuk3OzF-VjQ_AtCiH3RxQ4RYUs\",\n  authDomain: \"tapinx-e6a04.firebaseapp.com\",\n  projectId: \"tapinx-e6a04\",\n  storageBucket: \"tapinx-e6a04.firebasestorage.app\",\n  messagingSenderId: \"898635790224\",\n  appId: \"1:898635790224:web:0c2f5bcde9f20c27cb6515\",\n  measurementId: \"G-95VQG4X74F\"\n};\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\n\n// Clear any existing reCAPTCHA verifier\nexport const clearRecaptcha = () => {\n  if (window.recaptchaVerifier) {\n    try {\n      window.recaptchaVerifier.clear();\n    } catch (error) {\n      console.log('Error clearing reCAPTCHA:', error);\n    }\n    window.recaptchaVerifier = null;\n  }\n};\n\n// Setup and render reCAPTCHA verifier\nexport const setupRecaptcha = containerId => {\n  // Clear any existing verifier first\n  clearRecaptcha();\n\n  // Ensure container exists\n  const container = document.getElementById(containerId);\n  if (!container) {\n    throw new Error(`reCAPTCHA container with id \"${containerId}\" not found`);\n  }\n\n  // Create new verifier\n  window.recaptchaVerifier = new RecaptchaVerifier(auth, containerId, {\n    size: 'invisible',\n    callback: () => {\n      console.log('reCAPTCHA verified');\n    },\n    'expired-callback': () => {\n      console.log('reCAPTCHA expired');\n      clearRecaptcha();\n    },\n    'error-callback': error => {\n      console.error('reCAPTCHA error:', error);\n      clearRecaptcha();\n    }\n  });\n\n  // Render the verifier (required even for invisible reCAPTCHA)\n  try {\n    window.recaptchaVerifier.render().then(widgetId => {\n      console.log('reCAPTCHA rendered with widget ID:', widgetId);\n      window.recaptchaWidgetId = widgetId;\n    }).catch(error => {\n      console.error('Error rendering reCAPTCHA:', error);\n      clearRecaptcha();\n      throw error;\n    });\n  } catch (error) {\n    console.error('Error initializing reCAPTCHA:', error);\n    clearRecaptcha();\n    throw error;\n  }\n  return window.recaptchaVerifier;\n};\nexport const sendOTP = async phoneNumber => {\n  // Ensure reCAPTCHA is set up and rendered\n  const appVerifier = setupRecaptcha('recaptcha-container');\n\n  // Wait a bit to ensure reCAPTCHA is fully initialized\n  await new Promise(resolve => setTimeout(resolve, 100));\n  try {\n    const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, appVerifier);\n    return confirmationResult;\n  } catch (error) {\n    // Clear verifier on error to allow retry\n    clearRecaptcha();\n    throw error;\n  }\n};\nexport const verifyOTP = async (confirmationResult, otp) => {\n  const result = await confirmationResult.confirm(otp);\n  return result.user;\n};","map":{"version":3,"names":["initializeApp","getAuth","RecaptchaVerifier","signInWithPhoneNumber","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","clearRecaptcha","window","recaptchaVerifier","clear","error","console","log","setupRecaptcha","containerId","container","document","getElementById","Error","size","callback","expired-callback","render","then","widgetId","recaptchaWidgetId","catch","sendOTP","phoneNumber","appVerifier","Promise","resolve","setTimeout","confirmationResult","verifyOTP","otp","result","confirm","user"],"sources":["/Users/tajsethi/Desktop/titli-local/src/firebase.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDqV46aMnuk3OzF-VjQ_AtCiH3RxQ4RYUs\",\n  authDomain: \"tapinx-e6a04.firebaseapp.com\",\n  projectId: \"tapinx-e6a04\",\n  storageBucket: \"tapinx-e6a04.firebasestorage.app\",\n  messagingSenderId: \"898635790224\",\n  appId: \"1:898635790224:web:0c2f5bcde9f20c27cb6515\",\n  measurementId: \"G-95VQG4X74F\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\n\n// Clear any existing reCAPTCHA verifier\nexport const clearRecaptcha = () => {\n  if (window.recaptchaVerifier) {\n    try {\n      window.recaptchaVerifier.clear();\n    } catch (error) {\n      console.log('Error clearing reCAPTCHA:', error);\n    }\n    window.recaptchaVerifier = null;\n  }\n};\n\n// Setup and render reCAPTCHA verifier\nexport const setupRecaptcha = (containerId) => {\n  // Clear any existing verifier first\n  clearRecaptcha();\n  \n  // Ensure container exists\n  const container = document.getElementById(containerId);\n  if (!container) {\n    throw new Error(`reCAPTCHA container with id \"${containerId}\" not found`);\n  }\n\n  // Create new verifier\n  window.recaptchaVerifier = new RecaptchaVerifier(auth, containerId, {\n    size: 'invisible',\n    callback: () => {\n      console.log('reCAPTCHA verified');\n    },\n    'expired-callback': () => {\n      console.log('reCAPTCHA expired');\n      clearRecaptcha();\n    },\n    'error-callback': (error) => {\n      console.error('reCAPTCHA error:', error);\n      clearRecaptcha();\n    }\n  });\n\n  // Render the verifier (required even for invisible reCAPTCHA)\n  try {\n    window.recaptchaVerifier.render().then((widgetId) => {\n      console.log('reCAPTCHA rendered with widget ID:', widgetId);\n      window.recaptchaWidgetId = widgetId;\n    }).catch((error) => {\n      console.error('Error rendering reCAPTCHA:', error);\n      clearRecaptcha();\n      throw error;\n    });\n  } catch (error) {\n    console.error('Error initializing reCAPTCHA:', error);\n    clearRecaptcha();\n    throw error;\n  }\n\n  return window.recaptchaVerifier;\n};\n\nexport const sendOTP = async (phoneNumber) => {\n  // Ensure reCAPTCHA is set up and rendered\n  const appVerifier = setupRecaptcha('recaptcha-container');\n  \n  // Wait a bit to ensure reCAPTCHA is fully initialized\n  await new Promise(resolve => setTimeout(resolve, 100));\n  \n  try {\n    const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, appVerifier);\n    return confirmationResult;\n  } catch (error) {\n    // Clear verifier on error to allow retry\n    clearRecaptcha();\n    throw error;\n  }\n};\n\nexport const verifyOTP = async (confirmationResult, otp) => {\n  const result = await confirmationResult.confirm(otp);\n  return result.user;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}