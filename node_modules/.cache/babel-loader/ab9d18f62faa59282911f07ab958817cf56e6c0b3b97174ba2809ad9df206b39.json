{"ast":null,"code":"import{initializeApp}from\"firebase/app\";import{getAuth,RecaptchaVerifier,signInWithPhoneNumber}from\"firebase/auth\";const firebaseConfig={apiKey:\"AIzaSyDqV46aMnuk3OzF-VjQ_AtCiH3RxQ4RYUs\",authDomain:\"tapinx-e6a04.firebaseapp.com\",projectId:\"tapinx-e6a04\",storageBucket:\"tapinx-e6a04.firebasestorage.app\",messagingSenderId:\"898635790224\",appId:\"1:898635790224:web:0c2f5bcde9f20c27cb6515\",measurementId:\"G-95VQG4X74F\"};const app=initializeApp(firebaseConfig);export const auth=getAuth(app);// Clear any existing reCAPTCHA verifier\nexport const clearRecaptcha=()=>{if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear();}catch(error){console.log('Error clearing reCAPTCHA:',error);}window.recaptchaVerifier=null;}};// Setup and render reCAPTCHA verifier\nexport const setupRecaptcha=containerId=>{// Clear any existing verifier first\nclearRecaptcha();// Ensure container exists\nconst container=document.getElementById(containerId);if(!container){throw new Error(\"reCAPTCHA container with id \\\"\".concat(containerId,\"\\\" not found\"));}// Create new verifier - for invisible reCAPTCHA, it renders automatically\ntry{window.recaptchaVerifier=new RecaptchaVerifier(auth,containerId,{size:'invisible',callback:()=>{console.log('reCAPTCHA verified');},'expired-callback':()=>{console.log('reCAPTCHA expired');clearRecaptcha();},'error-callback':error=>{console.error('reCAPTCHA error:',error);clearRecaptcha();}});// For invisible reCAPTCHA, render() is called automatically, but we can verify it's ready\n// The verifier is ready to use after instantiation\nconsole.log('reCAPTCHA verifier initialized');}catch(error){console.error('Error initializing reCAPTCHA:',error);clearRecaptcha();throw error;}return window.recaptchaVerifier;};export const sendOTP=async phoneNumber=>{// Ensure reCAPTCHA is set up\nconst appVerifier=setupRecaptcha('recaptcha-container');try{const confirmationResult=await signInWithPhoneNumber(auth,phoneNumber,appVerifier);return confirmationResult;}catch(error){// Clear verifier on error to allow retry\nclearRecaptcha();throw error;}};export const verifyOTP=async(confirmationResult,otp)=>{const result=await confirmationResult.confirm(otp);return result.user;};","map":{"version":3,"names":["initializeApp","getAuth","RecaptchaVerifier","signInWithPhoneNumber","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","clearRecaptcha","window","recaptchaVerifier","clear","error","console","log","setupRecaptcha","containerId","container","document","getElementById","Error","concat","size","callback","expired-callback","sendOTP","phoneNumber","appVerifier","confirmationResult","verifyOTP","otp","result","confirm","user"],"sources":["/Users/tajsethi/Desktop/titli-local/src/firebase.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDqV46aMnuk3OzF-VjQ_AtCiH3RxQ4RYUs\",\n  authDomain: \"tapinx-e6a04.firebaseapp.com\",\n  projectId: \"tapinx-e6a04\",\n  storageBucket: \"tapinx-e6a04.firebasestorage.app\",\n  messagingSenderId: \"898635790224\",\n  appId: \"1:898635790224:web:0c2f5bcde9f20c27cb6515\",\n  measurementId: \"G-95VQG4X74F\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\n\n// Clear any existing reCAPTCHA verifier\nexport const clearRecaptcha = () => {\n  if (window.recaptchaVerifier) {\n    try {\n      window.recaptchaVerifier.clear();\n    } catch (error) {\n      console.log('Error clearing reCAPTCHA:', error);\n    }\n    window.recaptchaVerifier = null;\n  }\n};\n\n// Setup and render reCAPTCHA verifier\nexport const setupRecaptcha = (containerId) => {\n  // Clear any existing verifier first\n  clearRecaptcha();\n  \n  // Ensure container exists\n  const container = document.getElementById(containerId);\n  if (!container) {\n    throw new Error(`reCAPTCHA container with id \"${containerId}\" not found`);\n  }\n\n  // Create new verifier - for invisible reCAPTCHA, it renders automatically\n  try {\n    window.recaptchaVerifier = new RecaptchaVerifier(auth, containerId, {\n      size: 'invisible',\n      callback: () => {\n        console.log('reCAPTCHA verified');\n      },\n      'expired-callback': () => {\n        console.log('reCAPTCHA expired');\n        clearRecaptcha();\n      },\n      'error-callback': (error) => {\n        console.error('reCAPTCHA error:', error);\n        clearRecaptcha();\n      }\n    });\n    \n    // For invisible reCAPTCHA, render() is called automatically, but we can verify it's ready\n    // The verifier is ready to use after instantiation\n    console.log('reCAPTCHA verifier initialized');\n  } catch (error) {\n    console.error('Error initializing reCAPTCHA:', error);\n    clearRecaptcha();\n    throw error;\n  }\n\n  return window.recaptchaVerifier;\n};\n\nexport const sendOTP = async (phoneNumber) => {\n  // Ensure reCAPTCHA is set up\n  const appVerifier = setupRecaptcha('recaptcha-container');\n  \n  try {\n    const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, appVerifier);\n    return confirmationResult;\n  } catch (error) {\n    // Clear verifier on error to allow retry\n    clearRecaptcha();\n    throw error;\n  }\n};\n\nexport const verifyOTP = async (confirmationResult, otp) => {\n  const result = await confirmationResult.confirm(otp);\n  return result.user;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}